name = "weddingsnap-backend"
main = "src/index.ts"
compatibility_date = "2024-11-22"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "wedding-snap-db"
database_id = "local-db-id"
migrations_dir = "drizzle/migrations"

# R2 Bucket
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "wedding-snap-media"

# Queue設定（ZIP生成の非同期処理）
[[queues.producers]]
queue = "download-queue"
binding = "DOWNLOAD_QUEUE"

[[queues.consumers]]
queue = "download-queue"
max_batch_size = 1
max_batch_timeout = 30

# Cron設定（毎日00:00 UTCに自動削除処理を実行）
[triggers]
crons = ["0 0 * * *"]

# Environment Variables
[vars]
ENVIRONMENT = "development"
# TODO: 以下の値を実際の値に置き換えてください
CLERK_PUBLISHABLE_KEY = "pk_test_Z3JlYXQtcG9ueS05My5jbGVyay5hY2NvdW50cy5kZXYk"  # Clerk開発環境のPublishable Key
FRONTEND_URL = "http://localhost:3000"    # フロントエンドURL
FROM_EMAIL = "gsh05196yu@yahoo.co.jp"        # 送信元メールアドレス

# 本番環境設定
[env.production]
name = "weddingsnap-backend-production"

[env.production.vars]
ENVIRONMENT = "production"
# TODO: 以下の値を実際の値に置き換えてください
CLERK_PUBLISHABLE_KEY = "pk_test_Z3JlYXQtcG9ueS05My5jbGVyay5hY2NvdW50cy5kZXYk"  # Clerk本番環境のPublishable Key
FRONTEND_URL = "https://yourdomain.com"   # 本番フロントエンドURL
FROM_EMAIL = "noreply@yourdomain.com"     # 本番送信元メールアドレス
