# 出力形式
必ず実行しようとしている内容について説明し、こちらの実装・修正指示があるまで編集しないでください
肯定文で返すのではなく、メリット・デメリットを答えてその上でのベストプラクティスを教えて下さい。
非推奨で進めている場合ははっきりとやめておいたほうがいいと伝えてください
意見を頻繁に変えることがないように最初から最適なベストプラクティスを提示してください

# 📸 結婚式向け写真共有サービス（MVP仕様まとめ）

サービス名: WeddingSnap(wedding + snap)

画面作成時はスマホファーストで作成してください

---

# 1. 🎉 基本コンセプト

**新郎新婦がゲストから大量の写真・動画を簡単に集め、30日間だけ保管して一括ダウンロードできるサービス。**

- URL / QRコードで簡単共有
- 30日で自動削除
- とにかく“早く”“簡単に”写真が集まることが最大の価値

---

# 2. 👰 新郎新婦の利用フロー

1. **会員登録（Google認証）**
2. **登録した瞬間に「専用共有ページ」が自動生成される**
3. **URL / QRコードをゲストに共有**
4. **ゲストが写真・動画をアップロード**
5. **新郎新婦は一括ダウンロードでまとめて保存**

---

# 3. 👫 ゲストの利用フロー

1. URL or QR コードから共有ページにアクセス（ログイン不要）
2. 写真・動画をアップロード
3. **ゲストは個別ダウンロードのみ可能**（無料・有料とも）

---

# 4. 💾 写真・動画の保存仕様

- 保存期間：**30日間**
- 30日後にすべて自動削除（閲覧不可／DL不可）
- ストレージ：Cloudflare R2
- 容量制限：プランにより異なる

---

# 5. 💰 料金プランと制限

## ■ 無料プラン

- **容量：2GB**
- **新郎新婦：一括ダウンロード 1回のみ**
- ゲスト：個別ダウンロードのみ
- 広告表示あり（MVPでは後回しでもOK）

## ■ 有料プラン（800円／1結婚式）

- **容量：10GB**
- **新郎新婦：一括ダウンロード無制限**
- 広告非表示
- 保存期間は同じ（30日）

## ■ 保存期間延長（追加250円）

- 30日を追加延長（期間は後で決定）
- ダウンロード制限などはプランに準ずる

---

# 6. ❌ MVPで実装しない機能

- 共有ページのデザイン装飾
- QRコード付き案内カード（将来追加）
- コメント機能・タイムライン
- アルバム生成
- ZIP分割DL / 動画専用DL などの高度機能

---

# 7. 📦 特徴・価値

- **URLを渡すだけで大量の写真が瞬時に集まる**
- ゲストはアプリ不要・ログイン不要で手軽
- 新郎新婦は1カ所に全部集めて一括DLできる
- 保存期間が30日に限定されていることで、運用コストが低い
- 結婚式という“課金心理が強い場面”に最適化されている

---

# 🗂 Cloudflare 完結構成（結婚式向け写真共有サービス）

## 1️⃣ 概要

- 物理サーバーや有料クラウドサービスを使わず、**Cloudflare 上で完結**
- ランニングコストほぼゼロ（R2 ストレージ容量のみ）
- ワンタイム課金向け結婚式サービスに最適
- 1イベントあたり写真1500枚程度でも対応可能

---

## 2️⃣ システム構成フロー

1. ユーザー（新郎新婦 / ゲスト）がブラウザでアクセス
2. **Cloudflare Pages（CDN）** でフロント配信
3. アップロードや一括DLなどの処理は **Cloudflare Workers** 経由で実行
4. メタデータは **Cloudflare D1** に保存
5. 写真・動画・ZIP は **Cloudflare R2** に保存
6. 一括ダウンロード完了通知は **SendGrid / SMTP** でメール送信

---

## 3️⃣ 技術ごとの役割

| 技術 | 役割 | ポイント |
| --- | --- | --- |
| Cloudflare Pages | 静的フロント配信（Next.js可） | サーバー不要、CDNで高速 |
| Cloudflare Workers | サーバレス処理 | ZIP生成、バックグラウンド処理、論理削除 |
| Cloudflare D1 | DB管理 | メタデータ・ジョブ情報保存、SQLite互換 |
| Cloudflare R2 | ストレージ | 写真・動画・ZIP保存、転送無料 |
| Clerk Free / Cloudflare Access | 認証 | 新郎新婦ログイン管理 |
| SendGrid / SMTP | メール通知 | ZIP生成完了通知、無料枠で対応可 |

---

## 4️⃣ 30日後の自動削除フロー

1. Cron（Workers Cron Trigger）が毎日実行
2. D1 から **30日＋猶予7日を過ぎたメディア情報** を取得
3. Worker が R2 のオブジェクトを削除
4. D1 で論理削除（deleted_at・deleted_by更新）
- サーバーや手動操作不要で完全自動

---

## 5️⃣ 特徴

- 物理サーバーは不要（Cloudflare がすべて管理）
- ランニングコストほぼゼロ（R2容量課金のみ）
- スケーラブル：Cloudflare が自動負荷分散
- MVP実装も簡単：フロント＋Workers＋R2だけで動作